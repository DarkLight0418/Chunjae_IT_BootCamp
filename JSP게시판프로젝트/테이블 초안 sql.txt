
CREATE TABLE 게시글
(
  게시글 번호 INT     NOT NULL AUTO_INCREMENT,
  작성자    VARCHAR NOT NULL,
  제목     VARCHAR NOT NULL,
  작성시각   DATE    NOT NULL,
  첨부파일   BLOB    NULL    ,
  내용     TEXT    NOT NULL,
  게시판 번호 INT     NOT NULL,
  카테고리명  VARCHAR NOT NULL,
  PRIMARY KEY (게시글 번호)
);

CREATE TABLE 게시판
(
  게시판 번호 INT     NOT NULL,
  제목     VARCHAR NOT NULL,
  내용     TEXT    NOT NULL COMMENT '항목',
  첨부파일   BLOB    NULL    ,
  카테고리명  VARCHAR NOT NULL,
  PRIMARY KEY (게시판 번호)
);

CREATE TABLE 권한
(
  권한번호 INT     NOT NULL,
  권한명  VARCHAR NOT NULL DEFAULT 일반,
  PRIMARY KEY (권한번호)
);

CREATE TABLE 댓글
(
  댓글번호   INT      NOT NULL AUTO_INCREMENT,
  내용     TEXT     NOT NULL,
  작성일    DATETIME NOT NULL,
  ID     INT      NOT NULL,
  게시글 번호 INT      NOT NULL,
  PRIMARY KEY (댓글번호)
);

ALTER TABLE 댓글
  ADD CONSTRAINT UQ_게시글 번호 UNIQUE (게시글 번호);

CREATE TABLE 등급
(
  등급번호   INT     NOT NULL,
  등급명    VARCHAR NULL    ,
  요구 포인트 INT     NULL    ,
  PRIMARY KEY (등급번호)
);

CREATE TABLE 유저
(
  아이디  VARCHAR NOT NULL,
  이메일  VARCHAR NOT NULL,
  비밀번호 VARCHAR NOT NULL,
  생년월일 DATE    NOT NULL,
  이름   VARCHAR NOT NULL,
  연락처  INT     NOT NULL,
  포인트  INT     NOT NULL DEFAULT 0,
  권한번호 INT     NOT NULL,
  등급번호 INT     NOT NULL,
  PRIMARY KEY (아이디)
);

CREATE TABLE 통계
(
  게시글 번호 INT NOT NULL AUTO_INCREMENT,
  좋아요수   INT NOT NULL DEFAULT 0,
  조회수    INT NOT NULL DEFAULT 0,
  PRIMARY KEY (게시글 번호)
);

ALTER TABLE 댓글
  ADD CONSTRAINT FK_게시글_TO_댓글
    FOREIGN KEY (게시글 번호)
    REFERENCES 게시글 (게시글 번호);

ALTER TABLE 유저
  ADD CONSTRAINT FK_권한_TO_유저
    FOREIGN KEY (권한번호)
    REFERENCES 권한 (권한번호);

ALTER TABLE 게시글
  ADD CONSTRAINT FK_게시판_TO_게시글
    FOREIGN KEY (게시판 번호)
    REFERENCES 게시판 (게시판 번호);

ALTER TABLE 게시글
  ADD CONSTRAINT FK_유저_TO_게시글
    FOREIGN KEY (작성자)
    REFERENCES 유저 (아이디);

ALTER TABLE 유저
  ADD CONSTRAINT FK_등급_TO_유저
    FOREIGN KEY (등급번호)
    REFERENCES 등급 (등급번호);
