<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>fetch post</title>
</head>
<body>
  <script>
    //declare function fetch(input: RequestInfo | URL, init?: RequestInit): Promise<Response>;
    //방식1: then/catch/finally
    const f = () => {
      fetch('https://jsonplaceholder.typicode.com/posts', {
        method: 'POST', 
        body: JSON.stringify({title:'리액트', userId:1}), 
        headers: {'Content-type':'application/json;charset=UTF-8'}
      })
      .then(response => response.json())
      .then(jsObj => {
        console.log('jsObj', jsObj)
        document.getElementById('result').innerText = JSON.stringify(jsObj)
      })
    }

    //방식2: async/await -> 미션!!
    async function f2() {
      try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
          method: 'POST',
          headers: { 'Content-Type' : 'application/json; charset=UTF-8' },
          body: JSON.stringify( {
            title: '리액트',
            userId: 1
          })
        });

        const jsObj = await response.json()

        document .getElementById('result').innerText = JSON.stringify(jsObj, null, 2);
      } catch(err) {
        console.error('데이터 가져오는 중 에러 발생', err);
      } finally {
        console.log('요청 완료');
      }
    }

  </script>
  <button type="button" onclick="f()">요청</button>
  <button type="button" onclick="f2()">요청2</button>
  <div id='result'></div>
</body>
</html>